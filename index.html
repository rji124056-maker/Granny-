<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mobile Subway Surfers</title>
    <style>
        body { margin: 0; background: #222; overflow: hidden; font-family: sans-serif; touch-action: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; background: linear-gradient(#87CEEB 60%, #555 60%); overflow: hidden; }
        #player { position: absolute; width: 50px; height: 50px; background: #ff4757; bottom: 100px; left: 50%; transform: translateX(-50%); border-radius: 10px; transition: left 0.2s, bottom 0.2s; z-index: 10; box-shadow: 0 10px 0 #c0392b; }
        .obstacle { position: absolute; width: 60px; height: 40px; background: #2f3542; top: -50px; border-radius: 5px; }
        .coin { position: absolute; width: 30px; height: 30px; background: gold; top: -50px; border-radius: 50%; border: 3px solid #eccc68; }
        #score { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="score">Score: 0</div>
    <div id="player"></div>
</div>

<script>
    const container = document.getElementById('game-container');
    const player = document.getElementById('player');
    const scoreElement = document.getElementById('score');
    
    let score = 0;
    let currentLane = 1; // 0: Left, 1: Middle, 2: Right
    const lanes = ['20%', '50%', '80%'];
    let isJumping = false;
    let gameActive = true;

    // --- Controls (Swipe) ---
    let touchStart = 0;
    document.addEventListener('touchstart', e => touchStart = e.touches[0].clientX);
    document.addEventListener('touchend', e => {
        let touchEnd = e.changedTouches[0].clientX;
        if (touchStart - touchEnd > 50) moveLane(-1); // Swipe Left
        else if (touchEnd - touchStart > 50) moveLane(1); // Swipe Right
        else jump(); // Tap to jump
    });

    function moveLane(dir) {
        currentLane = Math.max(0, Math.min(2, currentLane + dir));
        player.style.left = lanes[currentLane];
    }

    function jump() {
        if (isJumping) return;
        isJumping = true;
        player.style.bottom = '200px';
        setTimeout(() => {
            player.style.bottom = '100px';
            setTimeout(() => isJumping = false, 200);
        }, 300);
    }

    // --- Obstacles & Coins Logic ---
    function spawnObject() {
        if (!gameActive) return;
        
        const isCoin = Math.random() > 0.5;
        const obj = document.createElement('div');
        obj.className = isCoin ? 'coin' : 'obstacle';
        
        const laneIdx = Math.floor(Math.random() * 3);
        obj.style.left = lanes[laneIdx];
        container.appendChild(obj);

        let top = -50;
        const interval = setInterval(() => {
            if (!gameActive) { clearInterval(interval); return; }
            top += 5;
            obj.style.top = top + 'px';

            // Collision Check
            const pRect = player.getBoundingClientRect();
            const oRect = obj.getBoundingClientRect();

            if (pRect.left < oRect.right && pRect.right > oRect.left &&
                pRect.top < oRect.bottom && pRect.bottom > oRect.top) {
                
                if (isCoin) {
                    score += 10;
                    scoreElement.innerText = `Score: ${score}`;
                    obj.remove();
                    clearInterval(interval);
                } else if (!isJumping) {
                    gameOver();
                }
            }

            if (top > window.innerHeight) {
                obj.remove();
                clearInterval(interval);
            }
        }, 20);
    }

    function gameOver() {
        gameActive = false;
        alert("Game Over! Score: " + score);
        location.reload();
    }

    setInterval(spawnObject, 1000);

</script>
</body>
</html>
